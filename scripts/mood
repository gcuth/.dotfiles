#!/usr/bin/env bb
(import 'java.time.format.DateTimeFormatter
        'java.time.LocalDateTime)

(def outpath "/Users/g/Documents/blog/data/logs/mood.csv")

(def now
  ; formatted current time
  (.format (LocalDateTime/now)
           (DateTimeFormatter/ofPattern "dd-MMM-yyyy HH:mm")))

(def mood
  ; the first number 
  (Integer/parseInt (re-find #"\d+" (str/join " " *command-line-args*))))


(if (.exists (io/file outpath))
  (spit outpath
        (str/join [(str/join "," [now mood]) "\n"])
        :append true))
